(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,function(e,t,n){e.exports=n(21)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(6),l=n.n(c),i=(n(13),n(3)),o=n(1),u=n(7),s=(n(14),function(e){return r.a.createElement("section",{className:"ingredient-list"},r.a.createElement("h2",null,"Loaded Ingredients"),r.a.createElement("ul",null,e.ingredients.map(function(t){return r.a.createElement("li",{key:t.id,onClick:e.onRemoveItem.bind(null,t.id)},r.a.createElement("span",null,t.title),r.a.createElement("span",null,t.amount,"x"))})))}),d=(n(15),function(e){return r.a.createElement("div",{className:"card"},e.children)}),m=(n(16),function(){return r.a.createElement("div",{className:"lds-ring"},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null))}),E=(n(17),r.a.memo(function(e){var t=Object(a.useState)(""),n=Object(o.a)(t,2),c=n[0],l=n[1],i=Object(a.useState)(0),u=Object(o.a)(i,2),s=u[0],E=u[1];return r.a.createElement("section",{className:"ingredient-form"},r.a.createElement(d,null,r.a.createElement("form",{onSubmit:function(t){t.preventDefault();var n={title:c,amount:s};e.onAddIngredient(n)}},r.a.createElement("div",{className:"form-control"},r.a.createElement("label",{htmlFor:"title"},"Name"),r.a.createElement("input",{type:"text",id:"title",value:c,onChange:function(e){return l(e.target.value)}})),r.a.createElement("div",{className:"form-control"},r.a.createElement("label",{htmlFor:"amount"},"Amount"),r.a.createElement("input",{type:"number",id:"amount",value:s,onChange:function(e){return E(e.target.value)}})),r.a.createElement("div",{className:"ingredient-form__actions"},r.a.createElement("button",{type:"submit"},"Add Ingredient"),e.loading&&r.a.createElement(m,null)))))})),f={loading:!1,error:null,data:null,extra:null,identifier:null},b=function(e,t){switch(t.type){case"SEND":return{loading:!0,error:null,data:null,extra:null,identifier:t.identifier};case"RESPONSE":return Object(i.a)(Object(i.a)({},e),{},{loading:!1,data:t.data,extra:t.extra});case"ERROR":return{error:t.error,loading:!1};case"CLEAR":return f;default:throw new Error("This is not mean to happen!")}},g=function(){var e=Object(a.useReducer)(b,f),t=Object(o.a)(e,2),n=t[0],r=t[1],c=Object(a.useCallback)(function(){return r({type:"CLEAR"})},[]),l=Object(a.useCallback)(function(e,t,n,a,c){r({type:"SEND",identifier:c}),fetch(e,{method:t,body:n,headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){r({type:"RESPONSE",data:e,extra:a})}).catch(function(e){r({type:"ERROR",error:"Something went Wrong: "+e.message})})},[]);return{isLoading:n.loading,data:n.data,error:n.error,sendRequest:l,reqExtra:n.extra,reqIdentifier:n.identifier,clear:c}},p=(n(18),r.a.memo(function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"backdrop",onClick:e.onClose}),r.a.createElement("div",{className:"error-modal"},r.a.createElement("h2",null,"An Error Occurred!"),r.a.createElement("p",null,e.children),r.a.createElement("div",{className:"error-modal__actions"},r.a.createElement("button",{type:"button",onClick:e.onClose},"Okay"))))})),v=(n(19),r.a.memo(function(e){var t=Object(a.useState)(""),n=Object(o.a)(t,2),c=n[0],l=n[1],i=e.onLoadIngredients,u=Object(a.useRef)(),s=g(),m=s.data,E=s.error,f=s.clear,b=s.isLoading,v=s.sendRequest;return Object(a.useEffect)(function(){var e=setTimeout(function(){if(c===u.current.value){var e=0===c.length?"":'?orderBy="title"&startAt="'.concat(c,'"&endAt="').concat(c,'\uf8ff"');v("https://react-http-9bce5-default-rtdb.firebaseio.com/ingredients.json"+e,"GET")}},500);return function(){clearTimeout(e)}},[i,c,u]),Object(a.useEffect)(function(){if(m&&!E&&!b){var e=[];for(var t in m)e.push({id:t,title:m[t].title,amount:m[t].amount});i(e)}},[m,E,b]),r.a.createElement("section",{className:"search"},E&&r.a.createElement(p,{onClose:f},E),r.a.createElement(d,null,r.a.createElement("div",{className:"search-input"},r.a.createElement("label",null,"Filter by Title"),b&&"Loading...",r.a.createElement("input",{type:"text",ref:u,value:c,onChange:function(e){return l(e.target.value)}}))))})),h=function(e,t){switch(t.type){case"SET":return t.ingredients;case"ADD":return[].concat(Object(u.a)(e),[t.ingredient]);case"DELETE":return e.filter(function(e){return e.id!==t.id});default:throw new Error("Should not get there!")}};var O=function(){var e=Object(a.useReducer)(h,[]),t=Object(o.a)(e,2),n=t[0],c=t[1],l=g(),u=l.isLoading,d=l.data,m=l.sendRequest,f=l.error,b=l.reqExtra,O=l.reqIdentifier,j=l.clear,N=Object(a.useCallback)(function(e){c({type:"SET",ingredients:e})},[]);Object(a.useEffect)(function(){u||f||"REMOVE_INGREDIENT"!==O?"ADD_INGREDIENT"!==O||u||f||c({type:"ADD",ingredient:Object(i.a)({id:d.name},b)}):c({type:"DELETE",id:b})},[d,b,O]);var R=Object(a.useCallback)(function(e){m("https://react-http-9bce5-default-rtdb.firebaseio.com/ingredients.json","POST",JSON.stringify(e),e,"ADD_INGREDIENT")},[m]),I=function(e){m("https://react-http-9bce5-default-rtdb.firebaseio.com/ingredients/".concat(e,".json"),"DELETE",null,e,"REMOVE_INGREDIENT")},y=Object(a.useMemo)(function(){return r.a.createElement(s,{ingredients:n,onRemoveItem:I})},[n,I]);return r.a.createElement("div",{className:"App"},f&&r.a.createElement(p,{onClose:function(){j()}},f),r.a.createElement(E,{onAddIngredient:R,loading:u}),r.a.createElement("section",null,r.a.createElement(v,{onLoadIngredients:N}),y))},j=(n(20),r.a.createContext({login:function(){},isLoggedIn:!1})),N=function(e){var t=Object(a.useState)(!1),n=Object(o.a)(t,2),c=n[0],l=n[1];return r.a.createElement(j.Provider,{value:{login:function(){l(!0)},isLoggedIn:c}},e.children)},R=function(e){var t=Object(a.useContext)(j);return r.a.createElement("div",{className:"auth"},r.a.createElement(d,null,r.a.createElement("h2",null,"You are not authenticated!"),r.a.createElement("p",null,"Please log in to continue."),r.a.createElement("button",{onClick:function(){t.login()}},"Log In")))},I=function(e){var t=Object(a.useContext)(j),n=r.a.createElement(R,null);return t.isLoggedIn&&(n=r.a.createElement(O,null)),n};l.a.render(r.a.createElement(N,null,r.a.createElement(I,null)),document.getElementById("root"))}],[[8,1,2]]]);
//# sourceMappingURL=main.cfafeb96.chunk.js.map